@model OrderSearchInput
@{
    ViewBag.Title = "Quản Lý Đơn Hàng";
}
<div class="box box-primary">
            <div class="box-body">
                <!--Form nhập đầu vào tìm kiếm-->
                <form id="formSearch"  action="~/Order/Search" method="get" data-container="#searchResult">
                 <input type="hidden" value="@Model.PageSize" name="@nameof(Model.PageSize)" />
                <div  class="row container-fluid">
                    <div class="col-sm-2">
                    <select class="form-control" name="">
                        <option value="">-- Chọn trạng thái</option>
                        @foreach (var status in OrderDataService.ListOrderStatus())
                        {
                            <option value="@status.Status">@status.Description</option>
                        }
                    </select>
                    </div>
                    <div class="col-sm-2">
                        <input type="text" name="orderTime" class="form-control daterange-picker" placeholder="" />
                    </div>
                    <div class="col-sm-8 input-group">
                        <input type="text" name="searchValue"
                               class="form-control"
                               placeholder="Tìm kiếm theo tên khách hàng hoặc tên người giao hàng">
                        <span class="input-group-btn">
                            <button type="submit" id="search-btn" class="btn btn-flat btn-info">
                                <i class="fa fa-search"></i> Tìm kiếm
                            </button>
                        </span>
                    </div>
                </div>
                </form>


                <!-- Hiển thị kết quả tìm kiếm -->
                <div id="searchResult">
                </div>
            </div>
        </div>
        
        <!-- Kết quả tìm kiếm -->
        @section scripts {
            <script>
                $(document).ready(function () {
                    $("#formSearch").submit(function (e) {
                        e.preventDefault();
                        paginationSearch(this, 1);
                        return;
                    });
                    paginationSearch("#formSearch", @Model.Page);
                });

                function paginationSearch(formSearch, page) {
                    var action = $(formSearch).prop("action");
                    var method = $(formSearch).prop("method");
                    var container = $(formSearch).data("container");

                    var searchData = $(formSearch).serializeArray();
                    searchData.push({ "name": "Page", "value": page });

                    $.ajax({
                        url: action,
                        type: method,
                        data: searchData,
                        async: false,
                        error: function () {
                            alert("Your request is not valid!");
                        },
                        success: function (data) {
                            $(container).html(data);
                        }
                    });
                }
            </script>
        }
